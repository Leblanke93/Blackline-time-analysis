<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Study Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .container { max-width: 600px; margin: auto; }
        label, input, select { display: block; width: 100%; margin-bottom: 10px; }
        button { padding: 10px; width: 100%; background-color: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        .result { margin-top: 20px; font-size: 1.2em; }
        .chatbot { margin-top: 20px; padding: 10px; background: #f1f1f1; border-radius: 5px; }
        .chatbot p { margin: 5px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Time Study Analysis Tool</h2>
        <div id="taskInputs"></div>
        <button onclick="initializeTaskInputs()">Add Task Type</button>
        <button onclick="calculateROI()">Calculate ROI</button>
        
        <div class="result" id="result"></div>
        <canvas id="roiChart"></canvas>
        
        <div class="chatbot" id="chatbot">
            <h3>Chatbot Assistance</h3>
            <p><strong>Why do we need these inputs?</strong></p>
            <p><em>Number of Preparers and Approvers:</em> Helps estimate workload distribution and resource allocation.</p>
            <p><em>Transactions per Month:</em> Determines the volume of work that requires automation.</p>
            <p><em>Manual Time:</em> Represents current manual processing time for comparison.</p>
            <p><em>Hourly Rate:</em> Calculates labor cost savings.</p>
            <p><strong>Understanding the Results</strong></p>
            <p><em>Automated Time:</em> Estimated automated processing time based on industry benchmarks.</p>
            <p><em>Time Saved:</em> Reduction in total hours spent on manual work.</p>
            <p><em>Cost Saved:</em> Estimated financial benefit from time savings.</p>
            <p><em>ROI Percentage:</em> Indicates how much value automation generates compared to labor costs.</p>
        </div>
    </div>
    
    <script>
        let tasks = [];

        function initializeTaskInputs() {
            let container = document.getElementById("taskInputs");
            if (!container) {
                console.error("Error: taskInputs element not found.");
                return;
            }
            addTaskInput();
        }

        function addTaskInput() {
            const container = document.getElementById('taskInputs');
            if (!container) {
                console.error("Error: taskInputs element not found.");
                return;
            }
            const index = tasks.length;
            
            const taskHTML = `
                <div class="task-group">
                    <label for="task_type_${index}">Select Task Type:</label>
                    <select id="task_type_${index}">
                        <option value="transaction_matching">Transaction Matching</option>
                        <option value="account_reconciliation">Account Reconciliation</option>
                        <option value="journal_entry">Journal Entry</option>
                        <option value="variance_analysis">Variance Analysis</option>
                        <option value="flux_analysis">Flux Analysis</option>
                    </select>
                    <label for="preparers_${index}">Number of Preparers:</label>
                    <input type="number" id="preparers_${index}" min="1" required>
                    <label for="approvers_${index}">Number of Approvers:</label>
                    <input type="number" id="approvers_${index}" min="1" required>
                    <label for="transactions_${index}">Number of Transactions (per month):</label>
                    <input type="number" id="transactions_${index}" min="1" required>
                    <label for="manual_time_${index}">Manual Time Per Transaction (minutes):</label>
                    <input type="number" id="manual_time_${index}" step="0.1" required>
                    <label for="hourly_rate_${index}">Hourly Rate ($):</label>
                    <input type="number" id="hourly_rate_${index}" step="0.1" required>
                </div>
            `;
            container.innerHTML += taskHTML;
            tasks.push(index);
        }

        function calculateROI() {
            console.log("Calculating ROI...");
            alert("ROI calculation logic needs to be implemented!");
        }
    </script>
</body>
</html>
